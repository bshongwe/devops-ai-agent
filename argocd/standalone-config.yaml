apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-cm
  namespace: argocd
data:
  # Server configuration
  url: http://localhost:8080
  application.instanceLabelKey: argocd.argoproj.io/instance
  
  # Disable authentication for local development
  server.insecure: "true"
  server.disable.auth: "true"
  server.enable.grpc.web: "true"
  
  # Repository credentials and configurations
  repositories: |
    - url: https://github.com/argoproj/argocd-example-apps
      type: git
    - url: https://helm.github.io/examples
      type: helm
      name: helm-example
  
  # Resource customizations to handle CRDs and other resources
  resource.customizations: |
    argoproj.io/Application:
      health.lua: |
        hs = {}
        hs.status = "Healthy"
        hs.message = "Application is healthy"
        return hs
  
  # RBAC configuration
  policy.default: role:readonly
  policy.csv: |
    p, role:admin, applications, *, */*, allow
    p, role:admin, clusters, *, *, allow  
    p, role:admin, repositories, *, *, allow
    g, argocd-admins, role:admin
  
  # Accounts configuration
  accounts.admin: login
  accounts.admin.enabled: "true"
  
  # Help and UI configuration
  help.chatUrl: ""
  help.chatText: "Chat now!"
  
  # Logging
  server.log.level: info
  
  # Timeout configurations
  timeout.reconciliation: 180s
  timeout.hard.reconciliation: 0s
